.container
  = simple_form_for @purchase_order, url: url_for, method: :put do |f|
    .row
      .col-sm-5
        = f.input :vendor_acknowledgement_status, collection: [ ['I have all products and will ship them to the customer', PurchaseOrder::FULFILL], ['I cannot fulfill this order', PurchaseOrder::DO_NOT_FULFILL] ], label: 'Status'

      .col-sm-5
        = f.input :vendor_acknowledgement_reason, collection: PurchaseOrder::NO_FULFILL_REASONS

      .col-sm-2
        &nbsp;
        %button.btn.btn-sm.btn-warning Acknowledge

    .row#js-other-reason{style: 'display: none; margin-bottom: 25px'}
      .col-sm-10
        .controls
          %label.control-label
            Other Reason
          %input.form-control{name: 'purchase_order[other_reason]'}

        = content_for :page_js do
          :javascript
            $('document').ready(function() {
              $('#purchase_order_vendor_acknowledgement_reason').change(function(){
                if ( $(this).val() == 'other' ) {
                  $('#js-other-reason').show();
                } else {
                  $('#js-other-reason').hide();
                }
              });
            })


  .row
    .col-sm-12
      = render "order_details"

= content_for :page_js do
  :javascript
    $('document').ready(function() {
      function update_form() {
        var value =  $('#purchase_order_vendor_acknowledgement_status')[0].value;

        if ( value === 'true' ) {
          $('.purchase_order_vendor_acknowledgement_reason').hide();
        } else {
          $('.purchase_order_vendor_acknowledgement_reason').show();
        }
      }

      update_form();
      $('#purchase_order_vendor_acknowledgement_status').change(function(e) {
        update_form();
      });
    });
