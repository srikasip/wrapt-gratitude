= simple_form_for( [:admin, @gift_question_impact], url: admin_training_set_gift_question_impact_path(@training_set, @gift_question_impact)) do |f|
  = f.error_notification

  .form-inputs
    = render 'gift_question_details'

    .form-group
      %h3 Overall Question Importance
     
      .slider-with-labels.clearfix
        %span.slider-label.slider-label__min Low
        = f.input :question_impact, label: false, wrapper: false, input_html: { data: {provide: 'slider', slider_min: -1, slider_max: 1, slider_step: '.01', slider_tooltip: 'hide', slider_value: (f.object.question_impact), slider_selection: 'none' }}
        %span.slider-label.slider-label__max High
    
    %h3 Response Impacts
    %table.table
      :ruby
        response_impacts = @gift_question_impact.response_impacts.preload(:survey_question_option).sort{|a, b| a.survey_question_option.sort_order <=> b.survey_question_option.sort_order}
        other_options = response_impacts.select{|_| _.survey_question_option.is_a?(SurveyQuestionOtherOption)}
        # put the other options at the end
        response_impacts -= other_options
        response_impacts += other_options
        response_impact_position = 1
      = f.simple_fields_for :response_impacts, response_impacts do |response_impact_fields|
        %tr
          %td
            #{response_impact_position}:
            = response_impact_fields.object.survey_question_option.text
          %td
            %span.slider-label.slider-label__min
              \-
            = response_impact_fields.input :impact, label: false, wrapper: false, input_html: { data: {provide: 'slider', slider_min: -1, slider_max: 1, slider_step: '.01', slider_tooltip: 'hide', slider_value: (response_impact_fields.object.impact), slider_selection: 'none' }}
            %span.slider-label.slider-label__max
              +
        - response_impact_position += 1

  .form-actions
    = f.button :submit, "Save"

